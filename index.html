<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Legion's Lab | Professional IT Problem Solvers</title>
  <meta name="description" content="We fix bugs, write code, build websites, secure systems, automate workflows, and consult on all IT needs. You got problems, we got solutions.">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Intro Pill Choice Screen with drip -->
  <div class="intro-screen" id="intro-screen">
    <canvas id="intro-matrix-bg"></canvas>
    <h1 class="intro-title">Choose Wisely, Legion</h1>
    <div class="intro-buttons">
      <button id="red-pill" class="pill-button">Red Pill</button>
      <button id="blue-pill" class="pill-button">Blue Pill</button>
    </div>
  </div>

  <header>
    <h1>Legion's Lab</h1>
    <nav>
      <a href="#about">About</a>
      <a href="#services">Services</a>
      <a href="#contact">Contact</a>
      <a href="#demos">Demos</a>
    </nav>
  </header>

  <main>
    <section id="about">
      <h2>About Legion</h2>
      <p>Professional IT problem solvers. We debug and write code in any language you prefer, build secure websites, offer web dev and cybersecurity consulting, handle full company cyber contracts, automate scripts, design sites, and deliver whatever you need. You got problems, we got your solutions.</p>
    </section>

    <section id="services">
      <h2>Services</h2>
      <ul>
        <li>Bug fixes & debugging (any language)</li>
        <li>Automation scripts & tools</li>
        <li>Web development & design</li>
        <li>Cybersecurity consulting & company-wide contracts</li>
        <li>Site security & optimization</li>
        <li>IT consulting for ops, bids, and more â€” we offer it all</li>
      </ul>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <p>Reach out: <a href="mailto:legion@legionslab.com">legion@legionslab.com</a></p>
    </section>

    <section id="demos" class="demos-section">
      <h2>What Legion Can Build For You</h2>
      <p>Interactive demos powered by code â€” bug fixes, animations, automation, custom tools. Let's make your project unbreakable.</p>

      <!-- Demo 1: Particle Mouse Effect (confined box) -->
      <div class="demo-card">
        <h3>Interactive Mouse Particles</h3>
        <p>Confined mouse-responsive particles â€” add flair to any section.</p>
        <div id="particles-demo" class="demo-container">
          <canvas id="particles-canvas"></canvas>
        </div>
      </div>

      <!-- Demo 2: 3D Hover Cards -->
      <div class="demo-card">
        <h3>3D Hover Cards</h3>
        <p>Showcase services with depth and interactivity.</p>
        <div class="cards-container">
          <div class="card">Bug Fixes & Debugging</div>
          <div class="card">Automation Scripts</div>
          <div class="card">Tech Consulting</div>
        </div>
      </div>

      <!-- Demo 3: Code / Debug Showcase -->
      <div class="demo-card full-width">
        <h3>Code Writing & Debugging in Action</h3>
        <p>Watch a "buggy" function get fixed live (simulated terminal).</p>
        <div class="terminal-wrapper">
          <div class="terminal-bar">
            <div class="terminal-buttons">
              <div class="terminal-button"></div>
              <div class="terminal-button"></div>
              <div class="terminal-button"></div>
            </div>
            <span class="terminal-title">Legion's Debug Terminal - Python Mode</span>
          </div>
          <div id="terminal-demo" class="terminal"></div>
        </div>
      </div>

      <!-- Demo 4: Glitch Text -->
      <div class="demo-card">
        <h3>Glitch Effects</h3>
        <p>Edgy text animations for bold branding.</p>
        <h1 class="glitch" data-text="We Are Legion">We Are Legion</h1>
      </div>

      <!-- Demo 5: Lego-ify Image (random meme) -->
      <div class="demo-card full-width">
        <h3>Lego-ify Image</h3>
        <p>Watch a random meme turn into Lego bricks.</p>
        <button id="lego-button">Lego-ify Random Meme</button>
        <canvas id="lego-canvas" class="lego-canvas"></canvas>
      </div>

      <!-- Demo 6: Pixel / Voxel Drop (grid fall + bounce) -->
      <div class="demo-card full-width">
        <h3>Pixel / Voxel Drop</h3>
        <p>Watch an image shatter into bouncing 3D cubes.</p>
        <button id="voxel-button">Shatter Random Image</button>
        <div id="voxel-container"></div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2026 Legion's Lab. We are Legion. ðŸ˜ˆ | 
      <a href="https://github.com/realMNohgee/legionslab-site" target="_blank">View Source on GitHub</a>
    </p>
  </footer>

  <!-- JS for Intro Pill Choice + Intro Drip -->
  <script>
    const introScreen = document.getElementById('intro-screen');
    const redPill = document.getElementById('red-pill');
    const bluePill = document.getElementById('blue-pill');

    redPill.addEventListener('click', () => {
      window.location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';  // Rickroll
    });

    bluePill.addEventListener('click', () => {
      introScreen.classList.add('hidden');
      setTimeout(() => { introScreen.style.display = 'none'; }, 1000);
    });

    // Intro Matrix drip
    function introDrip() {
      const canvas = document.getElementById('intro-matrix-bg');
      if (canvas) {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        });

        const ctx = canvas.getContext('2d');
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()_+-=[]{}|;:\'",./?`~';
        const fontSize = 14;
        const columns = Math.floor(canvas.width / fontSize);
        const drops = Array.from({length: columns}, () => Math.random() * canvas.height / fontSize);

        function draw() {
          ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#00ff00';
          ctx.font = `${fontSize}px 'Courier New'`;
          drops.forEach((y, x) => {
            const text = chars[Math.floor(Math.random() * chars.length)];
            ctx.fillText(text, x * fontSize, y * fontSize);
            if (y * fontSize > canvas.height && Math.random() > 0.975) y = 0;
            drops[x] = y + 1;
          });
        }

        setInterval(draw, 50);
      }
    }
    introDrip();
  </script>

  <!-- JS for Particle Demo (confined to box) -->
  <script>
    const particlesCanvas = document.getElementById('particles-canvas');
    if (particlesCanvas) {
      function resizeParticles() {
        const rect = particlesCanvas.parentElement.getBoundingClientRect();
        particlesCanvas.width = rect.width;
        particlesCanvas.height = rect.height;
      }

      window.addEventListener('resize', resizeParticles);
      resizeParticles();

      const ctx = particlesCanvas.getContext('2d');
      let particles = [];
      const mouse = { x: null, y: null };

      class Particle {
        constructor() {
          this.x = Math.random() * particlesCanvas.width;
          this.y = Math.random() * particlesCanvas.height;
          this.size = Math.random() * 3 + 1;
          this.speedX = Math.random() * 1 - 0.5;
          this.speedY = Math.random() * 1 - 0.5;
        }
        update() {
          this.x += this.speedX;
          this.y += this.speedY;
          if (mouse.x && mouse.y) {
            const dx = mouse.x - this.x;
            const dy = mouse.y - this.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < 100) {
              this.x += dx * 0.05;
              this.y += dy * 0.05;
            }
          }
          if (this.x < 0) this.x = particlesCanvas.width;
          if (this.x > particlesCanvas.width) this.x = 0;
          if (this.y < 0) this.y = particlesCanvas.height;
          if (this.y > particlesCanvas.height) this.y = 0;
        }
        draw() {
          ctx.fillStyle = '#00ff00';
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      function initParticles() {
        particles = [];
        const count = Math.floor(particlesCanvas.width * particlesCanvas.height / 3000);
        for (let i = 0; i < count; i++) particles.push(new Particle());
      }

      initParticles();
      window.addEventListener('resize', initParticles);

      function animate() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.08)';
        ctx.fillRect(0, 0, particlesCanvas.width, particlesCanvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
      }
      animate();

      particlesCanvas.addEventListener('mousemove', e => {
        const rect = particlesCanvas.getBoundingClientRect();
        mouse.x = e.clientX - rect.left;
        mouse.y = e.clientY - rect.top;
      });
    }
  </script>

  <!-- JS for Terminal Typing Effect (longer, looping) -->
  <script>
    const terminal = document.getElementById('terminal-demo');
    if (terminal) {
      const lines = [
        '> # Buggy Python script example',
        '> def buggy_sum(a, b):',
        '>   return a + b  # Oops, concatenates strings',
        '> print(buggy_sum(5, "10"))  # "510"',
        '> # Legion debugs...',
        '> def fixed_sum(a, b):',
        '>   return float(a) + float(b)  # Convert to numbers',
        '> print(fixed_sum(5, "10"))  # 15.0 âœ…',
        '> # We automate workflows too',
        '> import requests',
        '> def auto_fetch_data(url):',
        '>   response = requests.get(url)',
        '>   if response.status_code == 200:',
        '>     return response.json()',
        '>   else:',
        '>     raise ValueError("API error")',
        '> data = auto_fetch_data("https://api.example.com")  # Sample automation',
        '> # Cyber consulting: secure your site',
        '> from cryptography.fernet import Fernet',
        '> key = Fernet.generate_key()  # Encryption demo',
        '> cipher = Fernet(key)',
        '> encrypted = cipher.encrypt(b"Secret data")  # Secure it',
        '> # We offer it all â€” problems solved'
      ];

      let i = 0;
      function typeLine() {
        terminal.innerHTML += lines[i] + '\n';
        terminal.scrollTop = terminal.scrollHeight;
        i = (i + 1) % lines.length;
        setTimeout(typeLine, 1000);
      }
      typeLine();
    }
  </script>

  <!-- JS for Lego-ify & Pixel/Voxel Drop Demos (random memes, no upload) -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.167.1/build/three.min.js"></script>
  <script>
    // Lego-ify random meme
    const legoButton = document.getElementById('lego-button');
    const legoCanvas = document.getElementById('lego-canvas');
    if (legoButton && legoCanvas) {
      const ctx = legoCanvas.getContext('2d');
      legoCanvas.width = 600;
      legoCanvas.height = 400;

      const memes = [
        'https://i.imgflip.com/1bij.jpg', // Success Kid
        'https://i.imgflip.com/1ur9b0.jpg', // Distracted Boyfriend
        'https://i.imgflip.com/1g8my4.jpg' // This is Fine
      ];

      function legoify() {
        const randomMeme = memes[Math.floor(Math.random() * memes.length)];
        const img = new Image();
        img.crossOrigin = 'anonymous';
        img.onload = () => {
          ctx.drawImage(img, 0, 0, legoCanvas.width, legoCanvas.height);
          const brickSize = 20;
          for (let y = 0; y < legoCanvas.height; y += brickSize) {
            for (let x = 0; x < legoCanvas.width; x += brickSize) {
              const data = ctx.getImageData(x, y, brickSize, brickSize).data;
              let r = 0, g = 0, b = 0;
              for (let i = 0; i < data.length; i += 4) {
                r += data[i];
                g += data[i+1];
                b += data[i+2];
              }
              r = Math.round(r / (data.length/4));
              g = Math.round(g / (data.length/4));
              b = Math.round(b / (data.length/4));

              ctx.fillStyle = `rgb(${r},${g},${b})`;
              ctx.fillRect(x, y, brickSize, brickSize);

              ctx.fillStyle = 'rgba(0,0,0,0.3)';
              ctx.fillRect(x, y + brickSize - 4, brickSize, 4);
              ctx.fillStyle = 'rgba(255,255,255,0.2)';
              ctx.fillRect(x + 2, y + 2, brickSize - 4, 4);
            }
          }
        };
        img.src = randomMeme;
      }

      legoButton.addEventListener('click', legoify);
      legoify(); // Auto-load first meme
    }

    // Pixel / Voxel Drop (grid fall + bounce)
    const voxelButton = document.getElementById('voxel-button');
    const voxelContainer = document.getElementById('voxel-container');
    if (voxelButton && voxelContainer) {
      let scene, camera, renderer, cubes = [];

      function initVoxel() {
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);

        camera = new THREE.PerspectiveCamera(75, voxelContainer.clientWidth / voxelContainer.clientHeight, 0.1, 1000);
        camera.position.z = 5;

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(voxelContainer.clientWidth, voxelContainer.clientHeight);
        voxelContainer.appendChild(renderer.domElement);

        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(5, 5, 5);
        scene.add(light);

        const ambient = new THREE.AmbientLight(0x404040);
        scene.add(ambient);

        window.addEventListener('resize', () => {
          camera.aspect = voxelContainer.clientWidth / voxelContainer.clientHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(voxelContainer.clientWidth, voxelContainer.clientHeight);
        });
      }

      function shatterImage() {
        cubes.forEach(cube => scene.remove(cube));
        cubes = [];

        const images = [
          'https://i.imgflip.com/1bij.jpg',
          'https://i.imgflip.com/1ur9b0.jpg',
          'https://i.imgflip.com/1g8my4.jpg'
        ];
        const imgSrc = images[Math.floor(Math.random() * images.length)];

        const img = new Image();
        img.crossOrigin = 'anonymous';
        img.onload = () => {
          const canvas = document.createElement('canvas');
          canvas.width = img.width;
          canvas.height = img.height;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0);

          const pixelSize = 8;
          for (let y = 0; y < img.height; y += pixelSize) {
            for (let x = 0; x < img.width; x += pixelSize) {
              const data = ctx.getImageData(x, y, pixelSize, pixelSize).data;
              let r = 0, g = 0, b = 0;
              for (let i = 0; i < data.length; i += 4) {
                r += data[i];
                g += data[i+1];
                b += data[i+2];
              }
              r = Math.round(r / (data.length/4));
              g = Math.round(g / (data.length/4));
              b = Math.round(b / (data.length/4));

              const geometry = new THREE.BoxGeometry(0.1, 0.1, 0.1);
              const material = new THREE.MeshStandardMaterial({ color: `rgb(${r},${g},${b})` });
              const cube = new THREE.Mesh(geometry, material);

              cube.position.set(
                (x / img.width - 0.5) * 5,
                (0.5 - y / img.height) * 5,
                Math.random() * 2 - 1
              );

              cube.userData = {
                vy: Math.random() * -0.1 - 0.05,
                gravity: 0.005,
                bounce: -0.6,
                grounded: false
              };

              scene.add(cube);
              cubes.push(cube);
            }
          }
          animateVoxel();
        };
        img.src = imgSrc;
      }

      function animateVoxel() {
        requestAnimationFrame(animateVoxel);

        cubes.forEach(cube => {
          if (!cube.userData.grounded) {
            cube.userData.vy += cube.userData.gravity;
            cube.position.y += cube.userData.vy;

            if (cube.position.y < -2) {
              cube.position.y = -2;
              cube.userData.vy *= cube.userData.bounce;
              if (Math.abs(cube.userData.vy) < 0.01) cube.userData.grounded = true;
            }
          }
        });

        renderer.render(scene, camera);
      }

      initVoxel();
      voxelButton.addEventListener('click', shatterImage);
      shatterImage(); // Auto-load first
    }
  </script>
</body>
</html>